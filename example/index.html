<!DOCTYPE html>
<html>
<head>

    <title>Sample Application</title>


</head>
<body>

<br />
<div ng-app="sample" ng-controller="mainCtrl" class="container">
    <h3>{{title}}</h3>

</div>


<script src="../bower_components/angular/angular.js"></script>


<script src="../lib/iam/iam.js"></script>

<script src="../src/blocks.iam.module.js"></script>
<script src="../src/iamService.js"></script>

<script>
    angular
            .module('sample',
            ['blocks.iam'
            ])
            .controller('mainCtrl', function($scope, iamService) {

                $scope.title = 'IAM client example usage';

                var iamData = {
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": ["CanRead"],
                            "Resource": [
                                "ssrn:ss:iam:::account/100/assestmentgroup/*/customquestions"
                            ]
                        },
                        {
                            "Effect": "Allow",
                            "Action": ["CanUpdate","CanDelete","CanCreate"],
                            "Resource": "ssrn:ss:iam:::account/100/assestmentgroup/1/customquestions"
                        },
                        {
                            "Effect": "Deny",
                            "Action": ["CanUpdate"],
                            "Resource": [
                                "ssrn:ss:iam:::account/100/assestmentgroup/2/customquestions"
                            ]
                        }
                    ]
                };

                var resource = 'ssrn:ss:iam:::account/100/assestmentgroup/2/customquestions';
                var action = 'CanRead';

                var processedData = iamService.processIamData(iamData);

                var result = iamService.authorize(resource, action, processedData);
                console.log(result);

            });
</script>

</body>
</html>
